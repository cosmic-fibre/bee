-- insert
space = db.schema.space.create('test', { engine = 'sham' })
---
...
index = space:create_index('primary', { type = 'tree', parts = {1, 'num'} })
---
...
sham_dir()[1]
---
- 1
...
for key = 1, 132 do space:insert({key}) end
---
...
t = {}
---
...
for key = 1, 132 do table.insert(t, space:get({key})) end
---
...
t
---
- - [1]
  - [2]
  - [3]
  - [4]
  - [5]
  - [6]
  - [7]
  - [8]
  - [9]
  - [10]
  - [11]
  - [12]
  - [13]
  - [14]
  - [15]
  - [16]
  - [17]
  - [18]
  - [19]
  - [20]
  - [21]
  - [22]
  - [23]
  - [24]
  - [25]
  - [26]
  - [27]
  - [28]
  - [29]
  - [30]
  - [31]
  - [32]
  - [33]
  - [34]
  - [35]
  - [36]
  - [37]
  - [38]
  - [39]
  - [40]
  - [41]
  - [42]
  - [43]
  - [44]
  - [45]
  - [46]
  - [47]
  - [48]
  - [49]
  - [50]
  - [51]
  - [52]
  - [53]
  - [54]
  - [55]
  - [56]
  - [57]
  - [58]
  - [59]
  - [60]
  - [61]
  - [62]
  - [63]
  - [64]
  - [65]
  - [66]
  - [67]
  - [68]
  - [69]
  - [70]
  - [71]
  - [72]
  - [73]
  - [74]
  - [75]
  - [76]
  - [77]
  - [78]
  - [79]
  - [80]
  - [81]
  - [82]
  - [83]
  - [84]
  - [85]
  - [86]
  - [87]
  - [88]
  - [89]
  - [90]
  - [91]
  - [92]
  - [93]
  - [94]
  - [95]
  - [96]
  - [97]
  - [98]
  - [99]
  - [100]
  - [101]
  - [102]
  - [103]
  - [104]
  - [105]
  - [106]
  - [107]
  - [108]
  - [109]
  - [110]
  - [111]
  - [112]
  - [113]
  - [114]
  - [115]
  - [116]
  - [117]
  - [118]
  - [119]
  - [120]
  - [121]
  - [122]
  - [123]
  - [124]
  - [125]
  - [126]
  - [127]
  - [128]
  - [129]
  - [130]
  - [131]
  - [132]
...
-- replace/get
for key = 1, 132 do space:replace({key, key}) end
---
...
t = {}
---
...
for key = 1, 132 do table.insert(t, space:get({key})) end
---
...
t
---
- - [1, 1]
  - [2, 2]
  - [3, 3]
  - [4, 4]
  - [5, 5]
  - [6, 6]
  - [7, 7]
  - [8, 8]
  - [9, 9]
  - [10, 10]
  - [11, 11]
  - [12, 12]
  - [13, 13]
  - [14, 14]
  - [15, 15]
  - [16, 16]
  - [17, 17]
  - [18, 18]
  - [19, 19]
  - [20, 20]
  - [21, 21]
  - [22, 22]
  - [23, 23]
  - [24, 24]
  - [25, 25]
  - [26, 26]
  - [27, 27]
  - [28, 28]
  - [29, 29]
  - [30, 30]
  - [31, 31]
  - [32, 32]
  - [33, 33]
  - [34, 34]
  - [35, 35]
  - [36, 36]
  - [37, 37]
  - [38, 38]
  - [39, 39]
  - [40, 40]
  - [41, 41]
  - [42, 42]
  - [43, 43]
  - [44, 44]
  - [45, 45]
  - [46, 46]
  - [47, 47]
  - [48, 48]
  - [49, 49]
  - [50, 50]
  - [51, 51]
  - [52, 52]
  - [53, 53]
  - [54, 54]
  - [55, 55]
  - [56, 56]
  - [57, 57]
  - [58, 58]
  - [59, 59]
  - [60, 60]
  - [61, 61]
  - [62, 62]
  - [63, 63]
  - [64, 64]
  - [65, 65]
  - [66, 66]
  - [67, 67]
  - [68, 68]
  - [69, 69]
  - [70, 70]
  - [71, 71]
  - [72, 72]
  - [73, 73]
  - [74, 74]
  - [75, 75]
  - [76, 76]
  - [77, 77]
  - [78, 78]
  - [79, 79]
  - [80, 80]
  - [81, 81]
  - [82, 82]
  - [83, 83]
  - [84, 84]
  - [85, 85]
  - [86, 86]
  - [87, 87]
  - [88, 88]
  - [89, 89]
  - [90, 90]
  - [91, 91]
  - [92, 92]
  - [93, 93]
  - [94, 94]
  - [95, 95]
  - [96, 96]
  - [97, 97]
  - [98, 98]
  - [99, 99]
  - [100, 100]
  - [101, 101]
  - [102, 102]
  - [103, 103]
  - [104, 104]
  - [105, 105]
  - [106, 106]
  - [107, 107]
  - [108, 108]
  - [109, 109]
  - [110, 110]
  - [111, 111]
  - [112, 112]
  - [113, 113]
  - [114, 114]
  - [115, 115]
  - [116, 116]
  - [117, 117]
  - [118, 118]
  - [119, 119]
  - [120, 120]
  - [121, 121]
  - [122, 122]
  - [123, 123]
  - [124, 124]
  - [125, 125]
  - [126, 126]
  - [127, 127]
  - [128, 128]
  - [129, 129]
  - [130, 130]
  - [131, 131]
  - [132, 132]
...
-- update/get
for key = 1, 132 do space:update({key}, {{'+', 2, key}}) end
---
...
t = {}
---
...
for key = 1, 132 do table.insert(t, space:get({key})) end
---
...
t
---
- - [1, 2]
  - [2, 4]
  - [3, 6]
  - [4, 8]
  - [5, 10]
  - [6, 12]
  - [7, 14]
  - [8, 16]
  - [9, 18]
  - [10, 20]
  - [11, 22]
  - [12, 24]
  - [13, 26]
  - [14, 28]
  - [15, 30]
  - [16, 32]
  - [17, 34]
  - [18, 36]
  - [19, 38]
  - [20, 40]
  - [21, 42]
  - [22, 44]
  - [23, 46]
  - [24, 48]
  - [25, 50]
  - [26, 52]
  - [27, 54]
  - [28, 56]
  - [29, 58]
  - [30, 60]
  - [31, 62]
  - [32, 64]
  - [33, 66]
  - [34, 68]
  - [35, 70]
  - [36, 72]
  - [37, 74]
  - [38, 76]
  - [39, 78]
  - [40, 80]
  - [41, 82]
  - [42, 84]
  - [43, 86]
  - [44, 88]
  - [45, 90]
  - [46, 92]
  - [47, 94]
  - [48, 96]
  - [49, 98]
  - [50, 100]
  - [51, 102]
  - [52, 104]
  - [53, 106]
  - [54, 108]
  - [55, 110]
  - [56, 112]
  - [57, 114]
  - [58, 116]
  - [59, 118]
  - [60, 120]
  - [61, 122]
  - [62, 124]
  - [63, 126]
  - [64, 128]
  - [65, 130]
  - [66, 132]
  - [67, 134]
  - [68, 136]
  - [69, 138]
  - [70, 140]
  - [71, 142]
  - [72, 144]
  - [73, 146]
  - [74, 148]
  - [75, 150]
  - [76, 152]
  - [77, 154]
  - [78, 156]
  - [79, 158]
  - [80, 160]
  - [81, 162]
  - [82, 164]
  - [83, 166]
  - [84, 168]
  - [85, 170]
  - [86, 172]
  - [87, 174]
  - [88, 176]
  - [89, 178]
  - [90, 180]
  - [91, 182]
  - [92, 184]
  - [93, 186]
  - [94, 188]
  - [95, 190]
  - [96, 192]
  - [97, 194]
  - [98, 196]
  - [99, 198]
  - [100, 200]
  - [101, 202]
  - [102, 204]
  - [103, 206]
  - [104, 208]
  - [105, 210]
  - [106, 212]
  - [107, 214]
  - [108, 216]
  - [109, 218]
  - [110, 220]
  - [111, 222]
  - [112, 224]
  - [113, 226]
  - [114, 228]
  - [115, 230]
  - [116, 232]
  - [117, 234]
  - [118, 236]
  - [119, 238]
  - [120, 240]
  - [121, 242]
  - [122, 244]
  - [123, 246]
  - [124, 248]
  - [125, 250]
  - [126, 252]
  - [127, 254]
  - [128, 256]
  - [129, 258]
  - [130, 260]
  - [131, 262]
  - [132, 264]
...
-- delete/get
for key = 1, 132 do space:delete({key}) end
---
...
for key = 1, 132 do assert(space:get({key}) == nil) end
---
...
-- delete nonexistent
space:delete({1234})
---
...
-- select
for key = 1, 96 do space:insert({key}) end
---
...
index = space.index[0]
---
...
index:select({}, {iterator = db.index.ALL})
---
- - [1]
  - [2]
  - [3]
  - [4]
  - [5]
  - [6]
  - [7]
  - [8]
  - [9]
  - [10]
  - [11]
  - [12]
  - [13]
  - [14]
  - [15]
  - [16]
  - [17]
  - [18]
  - [19]
  - [20]
  - [21]
  - [22]
  - [23]
  - [24]
  - [25]
  - [26]
  - [27]
  - [28]
  - [29]
  - [30]
  - [31]
  - [32]
  - [33]
  - [34]
  - [35]
  - [36]
  - [37]
  - [38]
  - [39]
  - [40]
  - [41]
  - [42]
  - [43]
  - [44]
  - [45]
  - [46]
  - [47]
  - [48]
  - [49]
  - [50]
  - [51]
  - [52]
  - [53]
  - [54]
  - [55]
  - [56]
  - [57]
  - [58]
  - [59]
  - [60]
  - [61]
  - [62]
  - [63]
  - [64]
  - [65]
  - [66]
  - [67]
  - [68]
  - [69]
  - [70]
  - [71]
  - [72]
  - [73]
  - [74]
  - [75]
  - [76]
  - [77]
  - [78]
  - [79]
  - [80]
  - [81]
  - [82]
  - [83]
  - [84]
  - [85]
  - [86]
  - [87]
  - [88]
  - [89]
  - [90]
  - [91]
  - [92]
  - [93]
  - [94]
  - [95]
  - [96]
...
index:select({}, {iterator = db.index.GE})
---
- - [1]
  - [2]
  - [3]
  - [4]
  - [5]
  - [6]
  - [7]
  - [8]
  - [9]
  - [10]
  - [11]
  - [12]
  - [13]
  - [14]
  - [15]
  - [16]
  - [17]
  - [18]
  - [19]
  - [20]
  - [21]
  - [22]
  - [23]
  - [24]
  - [25]
  - [26]
  - [27]
  - [28]
  - [29]
  - [30]
  - [31]
  - [32]
  - [33]
  - [34]
  - [35]
  - [36]
  - [37]
  - [38]
  - [39]
  - [40]
  - [41]
  - [42]
  - [43]
  - [44]
  - [45]
  - [46]
  - [47]
  - [48]
  - [49]
  - [50]
  - [51]
  - [52]
  - [53]
  - [54]
  - [55]
  - [56]
  - [57]
  - [58]
  - [59]
  - [60]
  - [61]
  - [62]
  - [63]
  - [64]
  - [65]
  - [66]
  - [67]
  - [68]
  - [69]
  - [70]
  - [71]
  - [72]
  - [73]
  - [74]
  - [75]
  - [76]
  - [77]
  - [78]
  - [79]
  - [80]
  - [81]
  - [82]
  - [83]
  - [84]
  - [85]
  - [86]
  - [87]
  - [88]
  - [89]
  - [90]
  - [91]
  - [92]
  - [93]
  - [94]
  - [95]
  - [96]
...
index:select(4,  {iterator = db.index.GE})
---
- - [4]
  - [5]
  - [6]
  - [7]
  - [8]
  - [9]
  - [10]
  - [11]
  - [12]
  - [13]
  - [14]
  - [15]
  - [16]
  - [17]
  - [18]
  - [19]
  - [20]
  - [21]
  - [22]
  - [23]
  - [24]
  - [25]
  - [26]
  - [27]
  - [28]
  - [29]
  - [30]
  - [31]
  - [32]
  - [33]
  - [34]
  - [35]
  - [36]
  - [37]
  - [38]
  - [39]
  - [40]
  - [41]
  - [42]
  - [43]
  - [44]
  - [45]
  - [46]
  - [47]
  - [48]
  - [49]
  - [50]
  - [51]
  - [52]
  - [53]
  - [54]
  - [55]
  - [56]
  - [57]
  - [58]
  - [59]
  - [60]
  - [61]
  - [62]
  - [63]
  - [64]
  - [65]
  - [66]
  - [67]
  - [68]
  - [69]
  - [70]
  - [71]
  - [72]
  - [73]
  - [74]
  - [75]
  - [76]
  - [77]
  - [78]
  - [79]
  - [80]
  - [81]
  - [82]
  - [83]
  - [84]
  - [85]
  - [86]
  - [87]
  - [88]
  - [89]
  - [90]
  - [91]
  - [92]
  - [93]
  - [94]
  - [95]
  - [96]
...
index:select({}, {iterator = db.index.GT})
---
- - [1]
  - [2]
  - [3]
  - [4]
  - [5]
  - [6]
  - [7]
  - [8]
  - [9]
  - [10]
  - [11]
  - [12]
  - [13]
  - [14]
  - [15]
  - [16]
  - [17]
  - [18]
  - [19]
  - [20]
  - [21]
  - [22]
  - [23]
  - [24]
  - [25]
  - [26]
  - [27]
  - [28]
  - [29]
  - [30]
  - [31]
  - [32]
  - [33]
  - [34]
  - [35]
  - [36]
  - [37]
  - [38]
  - [39]
  - [40]
  - [41]
  - [42]
  - [43]
  - [44]
  - [45]
  - [46]
  - [47]
  - [48]
  - [49]
  - [50]
  - [51]
  - [52]
  - [53]
  - [54]
  - [55]
  - [56]
  - [57]
  - [58]
  - [59]
  - [60]
  - [61]
  - [62]
  - [63]
  - [64]
  - [65]
  - [66]
  - [67]
  - [68]
  - [69]
  - [70]
  - [71]
  - [72]
  - [73]
  - [74]
  - [75]
  - [76]
  - [77]
  - [78]
  - [79]
  - [80]
  - [81]
  - [82]
  - [83]
  - [84]
  - [85]
  - [86]
  - [87]
  - [88]
  - [89]
  - [90]
  - [91]
  - [92]
  - [93]
  - [94]
  - [95]
  - [96]
...
index:select(4,  {iterator = db.index.GT})
---
- - [5]
  - [6]
  - [7]
  - [8]
  - [9]
  - [10]
  - [11]
  - [12]
  - [13]
  - [14]
  - [15]
  - [16]
  - [17]
  - [18]
  - [19]
  - [20]
  - [21]
  - [22]
  - [23]
  - [24]
  - [25]
  - [26]
  - [27]
  - [28]
  - [29]
  - [30]
  - [31]
  - [32]
  - [33]
  - [34]
  - [35]
  - [36]
  - [37]
  - [38]
  - [39]
  - [40]
  - [41]
  - [42]
  - [43]
  - [44]
  - [45]
  - [46]
  - [47]
  - [48]
  - [49]
  - [50]
  - [51]
  - [52]
  - [53]
  - [54]
  - [55]
  - [56]
  - [57]
  - [58]
  - [59]
  - [60]
  - [61]
  - [62]
  - [63]
  - [64]
  - [65]
  - [66]
  - [67]
  - [68]
  - [69]
  - [70]
  - [71]
  - [72]
  - [73]
  - [74]
  - [75]
  - [76]
  - [77]
  - [78]
  - [79]
  - [80]
  - [81]
  - [82]
  - [83]
  - [84]
  - [85]
  - [86]
  - [87]
  - [88]
  - [89]
  - [90]
  - [91]
  - [92]
  - [93]
  - [94]
  - [95]
  - [96]
...
index:select({}, {iterator = db.index.LE})
---
- - [96]
  - [95]
  - [94]
  - [93]
  - [92]
  - [91]
  - [90]
  - [89]
  - [88]
  - [87]
  - [86]
  - [85]
  - [84]
  - [83]
  - [82]
  - [81]
  - [80]
  - [79]
  - [78]
  - [77]
  - [76]
  - [75]
  - [74]
  - [73]
  - [72]
  - [71]
  - [70]
  - [69]
  - [68]
  - [67]
  - [66]
  - [65]
  - [64]
  - [63]
  - [62]
  - [61]
  - [60]
  - [59]
  - [58]
  - [57]
  - [56]
  - [55]
  - [54]
  - [53]
  - [52]
  - [51]
  - [50]
  - [49]
  - [48]
  - [47]
  - [46]
  - [45]
  - [44]
  - [43]
  - [42]
  - [41]
  - [40]
  - [39]
  - [38]
  - [37]
  - [36]
  - [35]
  - [34]
  - [33]
  - [32]
  - [31]
  - [30]
  - [29]
  - [28]
  - [27]
  - [26]
  - [25]
  - [24]
  - [23]
  - [22]
  - [21]
  - [20]
  - [19]
  - [18]
  - [17]
  - [16]
  - [15]
  - [14]
  - [13]
  - [12]
  - [11]
  - [10]
  - [9]
  - [8]
  - [7]
  - [6]
  - [5]
  - [4]
  - [3]
  - [2]
  - [1]
...
index:select(7,  {iterator = db.index.LE})
---
- - [7]
  - [6]
  - [5]
  - [4]
  - [3]
  - [2]
  - [1]
...
index:select({}, {iterator = db.index.LT})
---
- - [96]
  - [95]
  - [94]
  - [93]
  - [92]
  - [91]
  - [90]
  - [89]
  - [88]
  - [87]
  - [86]
  - [85]
  - [84]
  - [83]
  - [82]
  - [81]
  - [80]
  - [79]
  - [78]
  - [77]
  - [76]
  - [75]
  - [74]
  - [73]
  - [72]
  - [71]
  - [70]
  - [69]
  - [68]
  - [67]
  - [66]
  - [65]
  - [64]
  - [63]
  - [62]
  - [61]
  - [60]
  - [59]
  - [58]
  - [57]
  - [56]
  - [55]
  - [54]
  - [53]
  - [52]
  - [51]
  - [50]
  - [49]
  - [48]
  - [47]
  - [46]
  - [45]
  - [44]
  - [43]
  - [42]
  - [41]
  - [40]
  - [39]
  - [38]
  - [37]
  - [36]
  - [35]
  - [34]
  - [33]
  - [32]
  - [31]
  - [30]
  - [29]
  - [28]
  - [27]
  - [26]
  - [25]
  - [24]
  - [23]
  - [22]
  - [21]
  - [20]
  - [19]
  - [18]
  - [17]
  - [16]
  - [15]
  - [14]
  - [13]
  - [12]
  - [11]
  - [10]
  - [9]
  - [8]
  - [7]
  - [6]
  - [5]
  - [4]
  - [3]
  - [2]
  - [1]
...
index:select(7,  {iterator = db.index.LT})
---
- - [6]
  - [5]
  - [4]
  - [3]
  - [2]
  - [1]
...
space:drop()
---
...
sham_schedule()
---
...
sham_dir()[1]
---
- 0
...
